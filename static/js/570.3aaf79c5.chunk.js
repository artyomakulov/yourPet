"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[570],{4096:function(e,t,n){n.r(t),n.d(t,{UserForm:function(){return w}});var a,r,s=n(9439),i=n(2791),o=n(2376),l={card:"UserForm_card__S-IDu",avatar:"UserForm_avatar__Uh3mB",avatarReadonlyOFF:"UserForm_avatarReadonlyOFF__SLuIy",btnContainer:"UserForm_btnContainer__Qt66t",form:"UserForm_form__Rtz4A",formField:"UserForm_formField__QDRXd",label:"UserForm_label__z5eKj",input:"UserForm_input__qGgJS",calendar:"UserForm_calendar__ca+yn",iconCamera:"UserForm_iconCamera__ChUw+",btnEdit:"UserForm_btnEdit__Wsx6+",btnOut:"UserForm_btnOut__LQXDo",iconOut:"UserForm_iconOut__P7WZa",btnDual:"UserForm_btnDual__CZLPH",btnConfirm:"UserForm_btnConfirm__15T9l",iconCheck:"UserForm_iconCheck__ZC3sK",iconCross:"UserForm_iconCross__0lJoC",btnSubmit:"UserForm_btnSubmit__U7Ep1",avatarReadonlyON:"UserForm_avatarReadonlyON__fViiL"},c=(n(830),["title","titleId"]);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(this,arguments)}function d(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function m(e,t){var n=e.title,s=e.titleId,o=d(e,c);return i.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 32 32",ref:t,"aria-labelledby":s},o),void 0===n?i.createElement("title",{id:s},"camera"):n?i.createElement("title",{id:s},n):null,a||(a=i.createElement("path",{fill:"none",stroke:"inherit",strokeWidth:2,strokeMiterlimit:4,strokeLinecap:"butt",strokeLinejoin:"round",d:"M16 21.333c2.209 0 4-1.791 4-4s-1.791-4-4-4c-2.209 0-4 1.791-4 4s1.791 4 4 4z"})),r||(r=i.createElement("path",{fill:"none",stroke:"inherit",strokeWidth:2,strokeMiterlimit:4,strokeLinecap:"butt",strokeLinejoin:"round",d:"M4 12c0-1.473 1.194-2.667 2.667-2.667h3.333c0.736 0 1.333-0.597 1.333-1.333s0.597-1.333 1.333-1.333h6.667c0.736 0 1.333 0.597 1.333 1.333s0.597 1.333 1.333 1.333h3.333c1.473 0 2.667 1.194 2.667 2.667v10.667c0 1.473-1.194 2.667-2.667 2.667h-18.667c-1.473 0-2.667-1.194-2.667-2.667v-10.667z"})))}var f=i.forwardRef(m);n.p;var v=n.p+"static/media/check.7706aa258778151894cbc84c5979d267.svg";var _=n.p+"static/media/out.86ef83296f403418f74d7009e74bc47b.svg";var h=n.p+"static/media/cross.f73b522c6f272603ded577d785d36e55.svg",p=n(2426),b=n.n(p),j=n(9434),x=n(4954),g=n(6330),y=n(1686),N=n.n(y),C=n(3329),w=function(e){var t=e.readonly,n=e.user,a=e.onSubmit,r=e.saveNewAvatar,c=(0,i.useState)(),u=(0,s.Z)(c,2),d=u[0],m=u[1],p=(0,i.useState)(n.name||""),y=(0,s.Z)(p,2),w=y[0],k=y[1],F=(0,i.useState)(n.email||""),U=(0,s.Z)(F,2),D=U[0],M=U[1],Y=(0,i.useState)(n.birthDate||"00.00.0000"),O=(0,s.Z)(Y,2),E=O[0],S=O[1],L=(0,i.useState)(n.phone||""),Z=(0,s.Z)(L,2),R=Z[0],P=Z[1],A=(0,i.useState)(n.city||""),q=(0,s.Z)(A,2),G=q[0],I=q[1],z=(0,i.useState)(!1),B=(0,s.Z)(z,2),W=B[0],J=B[1],T=(0,i.useState)(!1),H=(0,s.Z)(T,2),Q=H[0],V=H[1];(0,i.useEffect)((function(){m(null),k(n.name),M(n.email),S(n.birthDate),P(n.phone),I(n.city)}),[n]);var K=(0,i.useRef)(),X=(0,i.useRef)(),$=(0,j.I0)(),ee=(0,i.useMemo)((function(){return 9!==(null===E||void 0===E?void 0:E.split("0").length)?b()(E,"DD-MM-YYYY"):t?"":b()()}),[t,E]),te=(0,i.useMemo)((function(){return d?URL.createObjectURL(d):n.avatarURL}),[d,n.avatarURL]),ne=function(e){e.target.classList.contains("react-calendar__navigation__arrow")||J(!1)};(0,i.useEffect)((function(){return W?window.addEventListener("click",ne):window.removeEventListener("click",ne),function(){return window.removeEventListener("click",ne)}}),[W]);var ae=function(){V((function(e){return!e}))};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:l.card,children:(0,C.jsxs)("form",{className:l.form,onSubmit:function(e){if(e.preventDefault(),isNaN(b()(E,"DD.MM.YYYY"))||b()().year()-b()(E,"DD.MM.YYYY").year()===0)J(!0);else{R.length<13&&X.current.focus();var t={name:w,email:D,birthDate:b()(E,"DD.MM.YYYY").format("DD-MM-YYYY"),phone:R,city:G,userAvatar:d};a(t)}},children:[(0,C.jsxs)("div",{className:l.avatarContainer,children:[(0,C.jsx)("img",{src:te,className:[l.avatar,t?l.avatarReadonlyON:l.avatarReadonlyOFF].join(" "),alt:"profile"}),(0,C.jsx)("input",{type:"file",ref:K,value:"",onChange:function(e){var t=e.target.files[0];console.log("file",t),t.size>3145728?N().Notify.warning("You should select files up to 3 Mb"):m(t)},style:{display:"none"}}),!t&&(d?(0,C.jsxs)("div",{className:l.btnDual,children:[(0,C.jsxs)("button",{type:"button",className:l.btnConfirm,onClick:function(){r(d)},children:[(0,C.jsx)("img",{src:v,className:l.iconCheck,alt:"check"}),"Confirm"]}),(0,C.jsx)("button",{type:"button",onClick:function(){m(null)},className:l.btnConfirm,children:(0,C.jsx)("img",{src:h,className:l.iconCross,alt:"cross"})})]}):(0,C.jsxs)("button",{type:"button",className:l.btnEdit,onClick:function(){K.current.click()},children:[(0,C.jsx)(f,{className:l.iconCamera}),"Edit photo"]}))]}),(0,C.jsxs)("div",{className:l.inputContainer,children:[(0,C.jsxs)("div",{className:l.formField,children:[(0,C.jsx)("p",{className:l.label,children:"Name:"}),(0,C.jsx)("input",{type:"text",value:w,onInvalid:function(){return"message"},onChange:function(e){k(e.target.value)},readOnly:t,className:l.input,required:!0})]}),(0,C.jsxs)("div",{className:l.formField,children:[(0,C.jsx)("p",{className:l.label,children:"Email:"}),(0,C.jsx)("input",{type:"email",value:D,onChange:function(e){M(e.target.value)},className:l.input,readOnly:t,required:!0})]}),ee&&(0,C.jsxs)("div",{className:l.formField,children:[(0,C.jsx)("p",{className:l.label,children:"Birthday:"}),W?(0,C.jsx)(o.ZP,{className:l.calendar,calendarType:"iso8601",onChange:function(e){S(b()(e).format("DD.MM.YYYY")),J(!1)},value:ee?ee.toDate():new Date}):(0,C.jsx)("input",{type:"text",value:ee?ee.format("DD.MM.YYYY"):b()().format("DD.MM.YYYY"),onClick:function(e){t||(e.stopPropagation(),J((function(e){return!e})))},className:l.input,readOnly:!0})]}),(R||!t)&&(0,C.jsxs)("div",{className:l.formField,children:[(0,C.jsx)("p",{className:l.label,children:"Phone:"}),(0,C.jsx)("input",{type:"tel",ref:X,value:R,onChange:function(e){var t=e.target.value,n=/^[0-9_]+$/;if(1===t.length){if("+"===t)return void P(t);n.test(t)&&P("+"+t)}else t.length>1&&t.length<=13&&n.test(t[t.length-1])&&P(t)},className:l.input,readOnly:t,placeholder:"+380000000000",required:!0})]}),(G||!t)&&(0,C.jsxs)("div",{className:l.formField,children:[(0,C.jsx)("p",{className:l.label,children:"City:"}),(0,C.jsx)("input",{type:"text",value:G,onChange:function(e){I(e.target.value)},className:l.input,readOnly:t,placeholder:"Zaporizhzhia",required:!0})]}),t?(0,C.jsxs)("div",{className:l.x,children:[(0,C.jsx)("p",{className:l.label}),(0,C.jsxs)("button",{type:"button",className:l.btnOut,onClick:ae,children:[(0,C.jsx)("img",{src:_,className:l.iconOut,alt:"check"}),"Log Out"]})]}):(0,C.jsxs)("div",{className:l.formField,children:[(0,C.jsx)("p",{className:l.label}),(0,C.jsx)("button",{type:"submit",className:l.btnSubmit,children:"Save"})]})]})]})}),Q&&(0,C.jsx)(g.Z,{onClose:ae,onLogout:function(){$((0,x.ni)())}})]})}},683:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var a=n(9439),r=n(6673),s=n(2791),i=n(4164),o=n(1213),l="ModalUserInfo_overlay__gDvcZ",c="ModalUserInfo_modalWindow__rmBnw",u="ModalUserInfo_icon__VwsNS",d=n(3329),m=document.querySelector("#modal-root"),f=function(e){var t=e.onClose,n=e.children;(0,s.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return(0,i.createPortal)((0,d.jsx)("div",{className:l,onClick:function(e){e.currentTarget===e.target&&t()},children:(0,d.jsxs)("div",{className:c,children:[(0,d.jsx)(o.ySC,{className:u,onClick:t}),n]})}),m)},v=n(9434),_=n(3524),h=n(4954),p=n(321),b=n(1859),j="GreetingModal_overlay__BMRwz",x="GreetingModal_modalWindow__ivfMA",g="GreetingModal_icon__A067C",y="GreetingModal_title__Hrwru",N="GreetingModal_text__EqSJV",C="GreetingModal_buttonGo__Gq7r4",w="GreetingModal_imagePawprint__HUWbw",k=document.querySelector("#modal-root"),F=function(e){var t=e.onClose;(0,s.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return(0,i.createPortal)((0,d.jsx)("div",{className:j,onClick:function(e){e.currentTarget===e.target&&t()},children:(0,d.jsxs)("div",{className:x,children:[(0,d.jsx)(o.ySC,{className:g,"aria-label":"Close modal window",onClick:t}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:y,children:"Congrats!"}),(0,d.jsx)("p",{className:N,children:"Youre registration is success"}),(0,d.jsxs)("button",{type:"button",onClick:t,className:C,children:["Go to profile",(0,d.jsx)("img",{src:b.Z,alt:"pawprint",width:24,className:w})]})]})]})}),k)},U="UserPage_userDataContainer__S6BU9",D="UserPage_informationEditUserBtn__rmUnx",M="UserPage_iconEdit__J6E4A",Y="UserPage_title__5CGDq",O=n(3531),E=n(4096).UserForm,S=function(){var e=(0,s.useState)(!1),t=(0,a.Z)(e,2),n=t[0],i=t[1],o=(0,v.v9)(p.dy),l=(0,v.v9)(p.aJ),c=(0,v.v9)(p._p),u=(0,v.I0)(),m=function(){i((function(e){return!e}))};return l?(0,d.jsx)(r.Z,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h2",{className:Y,children:"My information:"}),(0,d.jsxs)("div",{className:U,children:[(0,d.jsx)("button",{onClick:m,className:D,"aria-label":"edit user data",children:(0,d.jsx)(_.puz,{className:M,size:24})}),(0,d.jsx)(E,{readonly:!0,user:o})]}),n&&(0,d.jsx)(f,{onClose:m,children:(0,d.jsx)(E,{readonly:!1,user:o,onSubmit:function(e){var t=new FormData;e.userAvatar!==o.userAvatar&&o.userAvatar&&t.append("userAvatar",e.userAvatar),e.name!==o.name&&t.append("name",e.name),e.email!==o.email&&t.append("email",e.email),e.birthDate!==o.birthDate&&t.append("birthDate",e.birthDate),e.phone!==o.phone&&t.append("phone",e.phone),e.city!==o.city&&t.append("city",e.city),console.log("updated formData",t),Object.keys(Object.fromEntries(t.entries())).length&&u((0,h.Nq)(t)),m()},saveNewAvatar:function(e){var t=new FormData;t.append("userAvatar",e),u((0,h.Nq)(t))}})}),c&&(0,d.jsx)(F,{onClose:function(){u((0,O.l)())}})]})}}}]);
//# sourceMappingURL=570.3aaf79c5.chunk.js.map