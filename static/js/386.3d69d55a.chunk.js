"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[386],{3405:function(e,t,n){n.d(t,{r:function(){return c}});var r,a=n(2791),s=["title","titleId"];function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function l(e,t){var n=e.title,l=e.titleId,c=o(e,s);return a.createElement("svg",i({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},c),n?a.createElement("title",{id:l},n):null,r||(r=a.createElement("path",{d:"M12 7V17M7 12L17 12",stroke:"#FEF9F9",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}var c=a.forwardRef(l);n.p},8474:function(e,t,n){n.d(t,{r:function(){return c}});var r,a=n(2791),s=["title","titleId"];function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function l(e,t){var n=e.title,l=e.titleId,c=o(e,s);return a.createElement("svg",i({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},c),n?a.createElement("title",{id:l},n):null,r||(r=a.createElement("path",{d:"M12 20V12M12 12V4M12 12H20M12 12H4",stroke:"white",strokeWidth:2,strokeLinecap:"round"})))}var c=a.forwardRef(l);n.p},4096:function(e,t,n){n.r(t),n.d(t,{UserForm:function(){return O}});var r,a,s=n(9439),i=n(2791),o=n(2376),l={card:"UserForm_card__S-IDu",avatar:"UserForm_avatar__Uh3mB",avatarReadonlyOFF:"UserForm_avatarReadonlyOFF__SLuIy",btnContainer:"UserForm_btnContainer__Qt66t",form:"UserForm_form__Rtz4A",formField:"UserForm_formField__QDRXd",label:"UserForm_label__z5eKj",input:"UserForm_input__qGgJS",calendar:"UserForm_calendar__ca+yn",iconCamera:"UserForm_iconCamera__ChUw+",btnEdit:"UserForm_btnEdit__Wsx6+",btnOut:"UserForm_btnOut__LQXDo",iconOut:"UserForm_iconOut__P7WZa",btnDual:"UserForm_btnDual__CZLPH",btnConfirm:"UserForm_btnConfirm__15T9l",iconCheck:"UserForm_iconCheck__ZC3sK",iconCross:"UserForm_iconCross__0lJoC",btnSubmit:"UserForm_btnSubmit__U7Ep1",avatarReadonlyON:"UserForm_avatarReadonlyON__fViiL"},c=(n(830),["title","titleId"]);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function m(e,t){var n=e.title,s=e.titleId,o=d(e,c);return i.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 32 32",ref:t,"aria-labelledby":s},o),void 0===n?i.createElement("title",{id:s},"camera"):n?i.createElement("title",{id:s},n):null,r||(r=i.createElement("path",{fill:"none",stroke:"inherit",strokeWidth:2,strokeMiterlimit:4,strokeLinecap:"butt",strokeLinejoin:"round",d:"M16 21.333c2.209 0 4-1.791 4-4s-1.791-4-4-4c-2.209 0-4 1.791-4 4s1.791 4 4 4z"})),a||(a=i.createElement("path",{fill:"none",stroke:"inherit",strokeWidth:2,strokeMiterlimit:4,strokeLinecap:"butt",strokeLinejoin:"round",d:"M4 12c0-1.473 1.194-2.667 2.667-2.667h3.333c0.736 0 1.333-0.597 1.333-1.333s0.597-1.333 1.333-1.333h6.667c0.736 0 1.333 0.597 1.333 1.333s0.597 1.333 1.333 1.333h3.333c1.473 0 2.667 1.194 2.667 2.667v10.667c0 1.473-1.194 2.667-2.667 2.667h-18.667c-1.473 0-2.667-1.194-2.667-2.667v-10.667z"})))}var f=i.forwardRef(m);n.p;var h=n.p+"static/media/check.7706aa258778151894cbc84c5979d267.svg";var p=n.p+"static/media/out.86ef83296f403418f74d7009e74bc47b.svg";var v=n.p+"static/media/cross.f73b522c6f272603ded577d785d36e55.svg",_=n(2426),b=n.n(_),j=n(3855),g=n(4954),y=n(6330),x=n(1686),w=n.n(x),N=n(3329),O=function(e){var t=e.readonly,n=e.user,r=e.onSubmit,a=e.saveNewAvatar,c=(0,i.useState)(),u=(0,s.Z)(c,2),d=u[0],m=u[1],_=(0,i.useState)(n.name||""),x=(0,s.Z)(_,2),O=x[0],C=x[1],k=(0,i.useState)(n.email||""),M=(0,s.Z)(k,2),F=M[0],U=M[1],E=(0,i.useState)(n.birthDate||"00.00.0000"),P=(0,s.Z)(E,2),D=P[0],S=P[1],Y=(0,i.useState)(n.phone||""),I=(0,s.Z)(Y,2),L=I[0],A=I[1],Z=(0,i.useState)(n.city||""),R=(0,s.Z)(Z,2),B=R[0],G=R[1],q=(0,i.useState)(!1),z=(0,s.Z)(q,2),T=z[0],V=z[1],W=(0,i.useState)(!1),H=(0,s.Z)(W,2),J=H[0],Q=H[1];(0,i.useEffect)((function(){m(null),C(n.name),U(n.email),S(n.birthDate),A(n.phone),G(n.city)}),[n]);var X=(0,i.useRef)(),K=(0,i.useRef)(),$=(0,j.I0)(),ee=(0,i.useMemo)((function(){return 9!==(null===D||void 0===D?void 0:D.split("0").length)?b()(D,"DD-MM-YYYY"):t?"":b()()}),[t,D]),te=(0,i.useMemo)((function(){return d?URL.createObjectURL(d):n.avatarURL}),[d,n.avatarURL]),ne=function(e){e.target.classList.contains("react-calendar__navigation__arrow")||V(!1)};(0,i.useEffect)((function(){return T?window.addEventListener("click",ne):window.removeEventListener("click",ne),function(){return window.removeEventListener("click",ne)}}),[T]);var re=function(){Q((function(e){return!e}))};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:l.card,children:(0,N.jsxs)("form",{className:l.form,onSubmit:function(e){if(e.preventDefault(),isNaN(b()(D,"DD.MM.YYYY"))||b()().year()-b()(D,"DD.MM.YYYY").year()===0)V(!0);else{L.length<13&&K.current.focus();var t={name:O,email:F,birthDate:b()(D,"DD.MM.YYYY").format("DD-MM-YYYY"),phone:L,city:B,userAvatar:d};r(t)}},children:[(0,N.jsxs)("div",{className:l.avatarContainer,children:[(0,N.jsx)("img",{src:te,className:[l.avatar,t?l.avatarReadonlyON:l.avatarReadonlyOFF].join(" "),alt:"profile"}),(0,N.jsx)("input",{type:"file",ref:X,value:"",onChange:function(e){var t=e.target.files[0];console.log("file",t),t.size>3145728?w().Notify.warning("You should select files up to 3 Mb"):m(t)},style:{display:"none"}}),!t&&(d?(0,N.jsxs)("div",{className:l.btnDual,children:[(0,N.jsxs)("button",{type:"button",className:l.btnConfirm,onClick:function(){a(d)},children:[(0,N.jsx)("img",{src:h,className:l.iconCheck,alt:"check"}),"Confirm"]}),(0,N.jsx)("button",{type:"button",onClick:function(){m(null)},className:l.btnConfirm,children:(0,N.jsx)("img",{src:v,className:l.iconCross,alt:"cross"})})]}):(0,N.jsxs)("button",{type:"button",className:l.btnEdit,onClick:function(){X.current.click()},children:[(0,N.jsx)(f,{className:l.iconCamera}),"Edit photo"]}))]}),(0,N.jsxs)("div",{className:l.inputContainer,children:[(0,N.jsxs)("div",{className:l.formField,children:[(0,N.jsx)("p",{className:l.label,children:"Name:"}),(0,N.jsx)("input",{type:"text",value:O,onInvalid:function(){return"message"},onChange:function(e){C(e.target.value)},readOnly:t,className:l.input,required:!0})]}),(0,N.jsxs)("div",{className:l.formField,children:[(0,N.jsx)("p",{className:l.label,children:"Email:"}),(0,N.jsx)("input",{type:"email",value:F,onChange:function(e){U(e.target.value)},className:l.input,readOnly:t,required:!0})]}),ee&&(0,N.jsxs)("div",{className:l.formField,children:[(0,N.jsx)("p",{className:l.label,children:"Birthday:"}),T?(0,N.jsx)(o.ZP,{className:l.calendar,calendarType:"iso8601",onChange:function(e){S(b()(e).format("DD.MM.YYYY")),V(!1)},value:ee?ee.toDate():new Date}):(0,N.jsx)("input",{type:"text",value:ee?ee.format("DD.MM.YYYY"):b()().format("DD.MM.YYYY"),onClick:function(e){t||(e.stopPropagation(),V((function(e){return!e})))},className:l.input,readOnly:!0})]}),(L||!t)&&(0,N.jsxs)("div",{className:l.formField,children:[(0,N.jsx)("p",{className:l.label,children:"Phone:"}),(0,N.jsx)("input",{type:"tel",ref:K,value:L,onChange:function(e){var t=e.target.value,n=/^[0-9_]+$/;if(1===t.length){if("+"===t)return void A(t);n.test(t)&&A("+"+t)}else t.length>1&&t.length<=13&&n.test(t[t.length-1])&&A(t)},className:l.input,readOnly:t,placeholder:"+380000000000",required:!0})]}),(B||!t)&&(0,N.jsxs)("div",{className:l.formField,children:[(0,N.jsx)("p",{className:l.label,children:"City:"}),(0,N.jsx)("input",{type:"text",value:B,onChange:function(e){G(e.target.value)},className:l.input,readOnly:t,placeholder:"Zaporizhzhia",required:!0})]}),t?(0,N.jsxs)("div",{className:l.x,children:[(0,N.jsx)("p",{className:l.label}),(0,N.jsxs)("button",{type:"button",className:l.btnOut,onClick:re,children:[(0,N.jsx)("img",{src:p,className:l.iconOut,alt:"check"}),"Log Out"]})]}):(0,N.jsxs)("div",{className:l.formField,children:[(0,N.jsx)("p",{className:l.label}),(0,N.jsx)("button",{type:"submit",className:l.btnSubmit,children:"Save"})]})]})]})}),J&&(0,N.jsx)(y.Z,{onClose:re,onLogout:function(){$((0,g.ni)())}})]})}},8781:function(e,t,n){n.r(t),n.d(t,{default:function(){return fe}});var r,a=n(9439),s=n(6673),i=n(2791),o=n(4164),l=n(1213),c="ModalUserInfo_overlay__gDvcZ",u="ModalUserInfo_modalWindow__rmBnw",d="ModalUserInfo_icon__VwsNS",m=n(3329),f=document.querySelector("#modal-root"),h=function(e){var t=e.onClose,n=e.children;(0,i.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return(0,o.createPortal)((0,m.jsx)("div",{className:c,onClick:function(e){e.currentTarget===e.target&&t()},children:(0,m.jsxs)("div",{className:u,children:[(0,m.jsx)(l.ySC,{className:d,onClick:t}),n]})}),f)},p=n(3855),v=n(3524),_=n(4954),b=n(321),j=n(1859),g="GreetingModal_overlay__BMRwz",y="GreetingModal_modalWindow__ivfMA",x="GreetingModal_icon__A067C",w="GreetingModal_title__Hrwru",N="GreetingModal_text__EqSJV",O="GreetingModal_buttonGo__Gq7r4",C="GreetingModal_imagePawprint__HUWbw",k=document.querySelector("#modal-root"),M=function(e){var t=e.onClose;(0,i.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return(0,o.createPortal)((0,m.jsx)("div",{className:g,onClick:function(e){e.currentTarget===e.target&&t()},children:(0,m.jsxs)("div",{className:y,children:[(0,m.jsx)(l.ySC,{className:x,"aria-label":"Close modal window",onClick:t}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{className:w,children:"Congrats!"}),(0,m.jsx)("p",{className:N,children:"Youre registration is success"}),(0,m.jsxs)("button",{type:"button",onClick:t,className:O,children:["Go to profile",(0,m.jsx)("img",{src:j.Z,alt:"pawprint",width:24,className:C})]})]})]})}),k)},F="UserPage_userDataContainer__S6BU9",U="UserPage_informationEditUserBtn__rmUnx",E="UserPage_iconEdit__J6E4A",P="UserPage_userPetsContainer__yTUvQ",D="UserPage_userPetsInfo__hzAl6",S="UserPage_userPetsTitle__v3yek",Y="UserPage_title__5CGDq",I=n(3531),L=n(8560),A=n(1686),Z=n.n(A),R="PetsList_list__iFAMq",B=["title","titleId"];function G(){return G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}function q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function z(e,t){var n=e.title,a=e.titleId,s=q(e,B);return i.createElement("svg",G({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},s),n?i.createElement("title",{id:a},n):null,r||(r=i.createElement("path",{d:"M18 6V18C18 19.1046 17.1046 20 16 20H8C6.89543 20 6 19.1046 6 18V6M15 6V5C15 3.89543 14.1046 3 13 3H11C9.89543 3 9 3.89543 9 5V6M4 6H20M10 10V16M14 10V16",stroke:"#54ADFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}var T=i.forwardRef(z),V=(n.p,"PetsItem_cardContainer__NU4s6"),W="PetsItem_cardImage__T2LmF",H="PetsItem_cardText__e1cwG",J="PetsItem_iconWrapper__4mv-E",Q="PetsItem_trashIcon__+OFU1",X="PetsItem_trashBtn__zbGmW",K="PetsItem_cardContent__LByCY",$=function(e){var t=e.pet,n=e.handleDeleteItem;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("li",{className:V,children:[(0,m.jsx)("img",{className:W,src:t.petAvatar,alt:t.name}),(0,m.jsxs)("div",{className:K,children:[(0,m.jsx)("p",{className:H,children:(0,m.jsxs)("div",{className:J,children:[(0,m.jsxs)("span",{children:[(0,m.jsx)("b",{children:"Name:"}),t.name]}),(0,m.jsx)("button",{type:"submit",className:X,onClick:function(){return n(t._id)},children:(0,m.jsx)(T,{className:Q})})]})}),(0,m.jsxs)("p",{className:H,children:[(0,m.jsx)("b",{children:"Date of birth:"}),t.birthday]}),(0,m.jsxs)("p",{className:H,children:[(0,m.jsx)("b",{children:"Type:"}),t.type]}),(0,m.jsxs)("p",{className:H,children:[(0,m.jsx)("b",{children:"Comments:"}),t.comments]})]})]})})},ee=n(8358),te=function(){var e,t=(0,i.useState)([]),n=(0,a.Z)(t,2),r=n[0],o=n[1],l=(0,i.useState)(!0),c=(0,a.Z)(l,2),u=c[0],d=c[1],f=null===(e=(0,L.v9)(b.dy))||void 0===e?void 0:e.token,h=(0,p.I0)();(0,i.useEffect)((function(){h((0,_.ts)()).then((function(e){console.log("User:",e),o(e.payload.myPets),d(!1)})).catch((function(e){console.log("Error fetching current user:",e),d(!1)}))}),[h]);return u?(0,m.jsx)(s.Z,{}):(0,m.jsx)("ul",{className:R,children:r.map((function(e){return(0,m.jsx)($,{pet:e,handleDeleteItem:function(){return t=e._id,void(0,ee.$7)(t,f).then((function(){o((function(e){return e.filter((function(e){return e._id!==t}))})),Z().Notify.success("Pet was deleted")})).catch((function(e){Z().Notify.success("Oops. Something went wrong. Try again")}));var t}},e._id)}))})},ne=n(7689),re=n(1087),ae=n(8474),se=n(3405),ie=n(7224),oe="AddPetButton_button__d5mR7",le="AddPetButton_icon__YGDql",ce="AddPetButton_iconSmall__9M48X",ue="AddPetButton_label__jxTXO",de=function(){var e=(0,ne.TH)(),t=(0,ie.a)().isLoggedIn;return(0,m.jsxs)(re.rU,{className:oe,to:t&&"/add-pet",state:{from:e},onClick:function(){t||Z().Notify.warning("You should be logged in to be able to add your pet")},children:[(0,m.jsx)("span",{className:ue,children:"Add Pet"}),(0,m.jsx)(ae.r,{className:le,width:24,height:24}),(0,m.jsx)(se.r,{className:ce,width:24,height:24})]})},me=n(4096).UserForm,fe=function(){var e=(0,i.useState)(!1),t=(0,a.Z)(e,2),n=t[0],r=t[1],o=(0,p.v9)(b.dy),l=(0,p.v9)(b.aJ),c=(0,p.v9)(b._p),u=(0,p.I0)(),d=function(){r((function(e){return!e}))};return l?(0,m.jsx)(s.Z,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h2",{className:Y,children:"My information:"}),(0,m.jsxs)("div",{className:F,children:[(0,m.jsx)("button",{onClick:d,className:U,"aria-label":"edit user data",children:(0,m.jsx)(v.puz,{className:E,size:24})}),(0,m.jsx)(me,{readonly:!0,user:o})]}),(0,m.jsxs)("div",{className:P,children:[(0,m.jsxs)("div",{className:D,children:[(0,m.jsx)("h2",{className:S,children:"My pets:"}),(0,m.jsx)(de,{})]}),(0,m.jsx)(te,{})]}),n&&(0,m.jsx)(h,{onClose:d,children:(0,m.jsx)(me,{readonly:!1,user:o,onSubmit:function(e){var t=new FormData;e.userAvatar!==o.userAvatar&&o.userAvatar&&t.append("userAvatar",e.userAvatar),e.name!==o.name&&t.append("name",e.name),e.email!==o.email&&t.append("email",e.email),e.birthDate!==o.birthDate&&t.append("birthDate",e.birthDate),e.phone!==o.phone&&t.append("phone",e.phone),e.city!==o.city&&t.append("city",e.city),console.log("updated formData",t),Object.keys(Object.fromEntries(t.entries())).length&&u((0,_.Nq)(t)),d()},saveNewAvatar:function(e){var t=new FormData;t.append("userAvatar",e),u((0,_.Nq)(t))}})}),c&&(0,m.jsx)(M,{onClose:function(){u((0,I.l)())}})]})}}}]);
//# sourceMappingURL=386.3d69d55a.chunk.js.map